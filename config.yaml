# =============================================================================
# YLStack Configuration File
# =============================================================================
# This file controls all platform behavior. No code changes needed.
#
# Environment variables can be used with ${VAR_NAME} syntax.
# Local overrides can be placed in config.local.yaml (gitignored).
# =============================================================================

# -----------------------------------------------------------------------------
# Platform Identity
# -----------------------------------------------------------------------------
platform:
  name: "YLStack"
  version: "1.0.0"
  description: "Universal Platform Engine"

# -----------------------------------------------------------------------------
# Runtime Configuration
# -----------------------------------------------------------------------------
runtime:
  adapter: "node"              # Options: node | cloudflare
  target: "vps"                # Options: vps | docker | pm2 | workers

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
database:
  driver: "sqlite"             # Options: sqlite | postgresql | d1 | libsql
  url: "file:./data/app.db"    # Connection URL
  poolSize: 10                 # Connection pool size
  connectionTimeout: 30000     # Connection timeout in ms

# -----------------------------------------------------------------------------
# Feature Flags & Limits
# -----------------------------------------------------------------------------
features:
  plugins:
    enabled:
      - "plugin-pages"         # Page builder
      - "plugin-forms"         # Form builder
    disabled: []

  pages:
    enabled: true
    maxPages: 100

  forms:
    enabled: true
    maxForms: 50

  users:
    enabled: true
    maxUsers: 1000

# -----------------------------------------------------------------------------
# Admin Panel Configuration
# -----------------------------------------------------------------------------
admin:
  theme: "default"
  branding:
    logo: "/assets/logo.png"
    favicon: "/favicon.ico"
    primaryColor: "#3B82F6"
    name: "YLStack Admin"
  defaultRole: "admin"        # Options: admin | editor | viewer

# -----------------------------------------------------------------------------
# Authentication Configuration
# -----------------------------------------------------------------------------
auth:
  provider: "better-auth"
  jwtSecret: "${JWT_SECRET}"              # REQUIRED: From environment variable
  sessionDuration: 86400                  # 1 day in seconds
  refreshTokenDuration: 604800            # 7 days in seconds
  maxSessionAge: 2592000                  # 30 days in seconds

  # Password requirements
  passwordMinLength: 8
  passwordRequireUppercase: true
  passwordRequireLowercase: true
  passwordRequireNumbers: true
  passwordRequireSpecialChars: false

# -----------------------------------------------------------------------------
# Storage Configuration
# -----------------------------------------------------------------------------
storage:
  provider: "local"            # Options: local | s3 | r2
  path: "./uploads"            # For local storage
  # bucket: ""                  # For s3/r2 storage
  # region: ""                  # For s3/r2 storage

  # Upload limits
  maxFileSize: 10485760        # 10MB in bytes
  allowedMimeTypes:
    - "image/jpeg"
    - "image/png"
    - "image/gif"
    - "image/webp"
    - "application/pdf"

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
logging:
  level: "info"                # Options: debug | info | warn | error
  format: "pretty"             # Options: json | pretty
  # file: "./logs/app.log"     # Optional: Log to file
  maxFiles: 10
  maxSize: "10m"

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
server:
  port: 3000
  host: "0.0.0.0"

  cors:
    enabled: true
    origin: "*"                # Specific domains: ["https://example.com"]
    credentials: true

  rateLimit:
    enabled: true
    windowMs: 60000            # 1 minute
    maxRequests: 100
